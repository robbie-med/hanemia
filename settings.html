<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Settings — Phlebotomy Loss Tracker</title>
  <link rel="stylesheet" href="./assets/styles.css" />
</head>
<body>
  <header class="topbar">
    <div>
      <h1>Settings</h1>
      <div class="subtle">Edits are saved locally (localStorage). Export JSON to share.</div>
    </div>
    <div class="topbar-actions">
      <a class="linkbtn" href="./index.html">Back to tracker</a>
      <button class="btn" id="btnExport">Export JSON</button>
      <button class="btn" id="btnImport">Import JSON</button>
      <button class="btn btn-danger" id="btnReset">Reset to defaults</button>
    </div>
  </header>

  <main class="container">
    <section class="card">
      <div class="row-between">
        <h2>Tube volumes</h2>
        <button class="btn btn-primary" id="btnSave">Save changes</button>
      </div>

      <div class="subtle">Edit draw volumes (mL). Keep IDs stable.</div>

      <div class="table-wrap" style="margin-top:10px">
        <table class="table">
          <thead>
            <tr>
              <th style="width:220px">Tube ID</th>
              <th>Label</th>
              <th style="width:140px">mL</th>
              <th style="width:140px">Family</th>
            </tr>
          </thead>
          <tbody id="tubesTbody"></tbody>
        </table>
      </div>
    </section>

    <section class="card">
      <h2>Orderables mapping</h2>
      <div class="subtle">
        Minimal editor: shows each orderable and its required tubes (tubeId×count).
        For detailed remapping, export JSON and edit in a text editor, then import.
      </div>

      <div class="table-wrap" style="margin-top:10px">
        <table class="table">
          <thead>
            <tr>
              <th style="width:220px">Orderable ID</th>
              <th>Label</th>
              <th style="width:160px">Category</th>
              <th>Requirements</th>
            </tr>
          </thead>
          <tbody id="ordTbody"></tbody>
        </table>
      </div>
    </section>

    <section class="card">
      <h2>JSON</h2>
      <textarea id="jsonBox" spellcheck="false" style="width:100%;min-height:220px"></textarea>
      <div class="row" style="margin-top:8px">
        <button class="btn" id="btnCopy">Copy</button>
        <span class="subtle" id="status"></span>
      </div>
    </section>
  </main>

  <script type="module" src="./src/settings.js"></script>
</body>
</html>
